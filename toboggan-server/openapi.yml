openapi: 3.1.0
info:
  title: Toboggan Server API
  description: REST API for the Toboggan presentation system that allows creating and serving slide-based talks with real-time WebSocket communication for Command/Notification interactions.
  contact:
    name: Igor Laborie
    email: ilaborie@gmail.com
  license:
    name: MIT OR Apache-2.0
    identifier: MIT OR Apache-2.0
  version: 0.1.0
servers:
- url: http://localhost:3000
  description: Local development server
paths:
  /api/command:
    post:
      tags:
      - command
      description: Create command
      operationId: post-api-command
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Value'
            example:
              command: Pause
      responses:
        '200':
          description: Status code 200
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
  /api/slides:
    get:
      tags:
      - slides
      description: Retrieve slides
      operationId: get-api-slides
      parameters: []
      responses:
        '200':
          description: Status code 200
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SlidesResponse'
  /api/talk:
    get:
      tags:
      - talk
      description: Retrieve talk
      operationId: get-api-talk
      parameters: []
      responses:
        '200':
          description: Status code 200
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TalkResponse'
  /api/ws:
    get:
      tags:
      - ws
      description: Retrieve ws
      operationId: get-api-ws
      parameters: []
      responses: {}
  /health:
    get:
      tags:
      - health
      description: Retrieve health
      operationId: get-health
      parameters: []
      responses:
        '200':
          description: Status code 200
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
components:
  schemas:
    HealthResponse:
      type: object
      required:
      - status
      - started_at
      - elapsed
      - talk
      - active_clients
      properties:
        active_clients:
          type: integer
          minimum: 0
        elapsed:
          $ref: '#/components/schemas/Duration'
        started_at:
          $ref: '#/components/schemas/Timestamp'
        status:
          $ref: '#/components/schemas/HealthResponseStatus'
        talk:
          type: string
    Notification:
      oneOf:
      - type: object
        required:
        - timestamp
        - state
        - type
        properties:
          state:
            $ref: '#/components/schemas/State'
          timestamp:
            $ref: '#/components/schemas/Timestamp'
          type:
            type: string
            enum:
            - State
      - type: object
        required:
        - timestamp
        - message
        - type
        properties:
          message:
            type: string
          timestamp:
            $ref: '#/components/schemas/Timestamp'
          type:
            type: string
            enum:
            - Error
      - type: object
        required:
        - timestamp
        - type
        properties:
          timestamp:
            $ref: '#/components/schemas/Timestamp'
          type:
            type: string
            enum:
            - Pong
      - type: object
        required:
        - type
        properties:
          type:
            type: string
            enum:
            - Blink
    Renderer:
      type: string
      enum:
      - Title
      - Thumbnail
      - Html
      - Raw
    SlideKind:
      type: string
      description: The kind of slide, which affects its styling and role in the presentation.
      enum:
      - Cover
      - Part
      - Standard
    SlidesResponse:
      type: object
      required:
      - slides
      properties:
        slides:
          type: array
          items:
            $ref: '#/components/schemas/Slide'
    Style:
      type: array
      items:
        type: string
      description: |-
        Styling information for slides (only available with `alloc` feature).

        Contains a list of CSS class names that can be applied to customize
        the appearance of individual slides.
    TalkResponse:
      type: object
      required:
      - title
      - date
      - footer
      - titles
      properties:
        date:
          $ref: '#/components/schemas/Date'
          description: The date of the presentation.
        footer:
          $ref: '#/components/schemas/Content'
          description: The footer of the presentation.
        title:
          $ref: '#/components/schemas/Content'
          description: The title of the presentation.
        titles:
          type: array
          items:
            type: string
          description: The slides titles
    Value: {}
tags:
- name: command
- name: health
- name: slides
- name: talk
- name: ws
