#!/usr/bin/env bash
#MISE description="Run iOS Swift linting with SwiftLint"

set -eu

echo "üì± Running iOS linting..."

# Lint Swift code with SwiftLint
if command -v swiftlint >/dev/null 2>&1; then
    echo "üîç Linting Swift code with SwiftLint..."
    if [ -d "TobogganApp" ]; then
        if swiftlint lint --config .swiftlint.yml; then
            echo "‚úÖ SwiftLint check completed successfully"
        else
            echo "‚ö†Ô∏è  SwiftLint check failed or SourceKit unavailable, skipping Swift linting"
            echo "Note: This may happen in CI environments or when Xcode tools are not properly configured"
        fi
    else
        echo "‚ÑπÔ∏è  No Swift code found in TobogganApp, skipping SwiftLint check"
    fi
else
    echo "‚ö†Ô∏è  SwiftLint not found, skipping Swift linting (install with: mise install swiftlint)"
fi

echo "‚úÖ All iOS linting checks completed!"