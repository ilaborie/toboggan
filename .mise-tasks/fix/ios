#!/usr/bin/env bash
#MISE description="Auto-fix iOS Swift code with SwiftLint"

set -eu

echo "üì± Running iOS auto-fixes..."

# Fix Swift code with SwiftLint
if command -v swiftlint >/dev/null 2>&1; then
    echo "üõ†Ô∏è  Auto-fixing Swift code with SwiftLint..."
    if [ -d "TobogganApp" ]; then
        if swiftlint --fix --config .swiftlint.yml; then
            echo "‚úÖ SwiftLint auto-fix completed successfully"
        else
            echo "‚ö†Ô∏è  SwiftLint auto-fix failed or SourceKit unavailable, skipping Swift auto-fix"
            echo "Note: This may happen in CI environments or when Xcode tools are not properly configured"
        fi
    else
        echo "‚ÑπÔ∏è  No Swift code found in TobogganApp, skipping SwiftLint fix"
    fi
else
    echo "‚ö†Ô∏è  SwiftLint not found, skipping Swift auto-fix (install with: mise install swiftlint)"
fi

echo "‚úÖ All iOS auto-fixes completed!"