#!/usr/bin/env bash
#MISE description="Auto-format Rust code and apply clippy suggested fixes"

set -eu

echo "ğŸ”§ Running Rust auto-fixes..."

# Format code
echo "ğŸ“ Auto-formatting Rust code..."
cargo +nightly fmt
pushd ./toboggan-web/toboggan-wasm
cargo +nightly fmt
popd

# Apply clippy suggestions
echo "ğŸ› ï¸  Applying clippy auto-fixes..."
cargo fix --allow-dirty --allow-staged
pushd ./toboggan-web/toboggan-wasm
cargo fix --allow-dirty --allow-staged
popd

echo "âœ… All Rust auto-fixes applied!"